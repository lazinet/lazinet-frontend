<!DOCTYPE html>
<html lang="vi-VN">
<head>
    <!-- === META FOUNDATION === -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0">

    <!-- === PRIMARY META - T·ªêI ∆ØU H√ÄNG ƒê·∫¶U === -->
    <title>Chuy·ªÉn ƒê·ªïi ·∫¢nh Sang WebP | C√¥ng C·ª• N√©n ·∫¢nh Chuy√™n Nghi·ªáp - LAZINET</title>
    <meta name="description" content="üéØ Chuy·ªÉn ƒë·ªïi ·∫£nh sang WebP mi·ªÖn ph√≠ - N√©n ·∫£nh, resize, l√†m ƒë·∫πp ·∫£nh online. H·ªó tr·ª£ JPG, PNG, GIF, BMP. C√¥ng c·ª• t·ªëi ∆∞u h√¨nh ·∫£nh t·ªët nh·∫•t Vi·ªát Nam 2024.">
    <meta name="keywords" content="chuy·ªÉn ·∫£nh sang webp, n√©n ·∫£nh, resize ·∫£nh, t·ªëi ∆∞u h√¨nh ·∫£nh, convert image to webp, c√¥ng c·ª• n√©n ·∫£nh online, l√†m ƒë·∫πp ·∫£nh, t·ªëi ∆∞u webp, lazinet image converter">

    <!-- === AUTHORITY & OWNERSHIP === -->
    <meta name="author" content="LAZINET - C√¥ng Ty C√¥ng Ngh·ªá H√†ng ƒê·∫ßu Vi·ªát Nam">
    <meta name="publisher" content="LAZINET Technologies">
    <meta name="copyright" content="LAZINET ¬© 2024">
    <meta name="designer" content="LAZINET Design Team">
    <meta name="reply-to" content="email@lazinet.com">

    <!-- === ROBOTS & CRAWLING - T·ªêI ∆ØU CRAWL === -->
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="slurp" content="index, follow, max-image-preview:large">
    <meta name="msnbot" content="index, follow, max-image-preview:large">
    <meta name="alexabot" content="index, follow">

    <!-- === CANONICAL & LANGUAGE === -->
    <link rel="canonical" href="https://lazinet.com/image-converter.html">
    <link rel="alternate" hreflang="vi-VN" href="https://lazinet.com/image-converter.html">
    <link rel="alternate" hreflang="vi" href="https://lazinet.com/image-converter.html">
    <link rel="alternate" hreflang="en" href="https://lazinet.com/en/image-converter.html">
    <link rel="alternate" hreflang="x-default" href="https://lazinet.com/image-converter.html">

    <!-- === SITEMAP & SEO LINKS === -->
    <link rel="sitemap" type="application/xml" title="Sitemap" href="https://lazinet.com/sitemap.xml">
    <link rel="author" href="https://lazinet.com/humans.txt">

    <!-- === FAVICON & APP ICONS - T·ªêI ∆ØU PWA === -->
    <link rel="icon" type="image/x-icon" href="../assets/img/logo-lazinet/lazinet_LogoOnly.ico">
    <link rel="icon" type="image/png" sizes="192x192" href="../assets/img/logo-lazinet/lazinet_LogoOnly-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="../assets/img/logo-lazinet/lazinet_LogoOnly-512x512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/logo-lazinet/lazinet_LogoOnly-180x180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../assets/img/logo-lazinet/lazinet_LogoOnly-152x152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../assets/img/logo-lazinet/lazinet_LogoOnly-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/logo-lazinet/lazinet_LogoOnly-76x76.png">
    <link rel="mask-icon" href="../assets/img/logo-lazinet/lazinet_LogoOnly.svg" color="#0052FF">

    <!-- === OPEN GRAPH - T·ªêI ∆ØU SOCIAL SHARING === -->
    <meta property="og:title" content="Chuy·ªÉn ƒê·ªïi ·∫¢nh Sang WebP | C√¥ng C·ª• N√©n ·∫¢nh Chuy√™n Nghi·ªáp - LAZINET">
    <meta property="og:description" content="Chuy·ªÉn ƒë·ªïi ·∫£nh sang WebP mi·ªÖn ph√≠ - N√©n ·∫£nh, resize, l√†m ƒë·∫πp ·∫£nh online. H·ªó tr·ª£ ƒëa ƒë·ªãnh d·∫°ng.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://lazinet.com/image-converter.html">
    <meta property="og:image" content="https://lazinet.com/assets/img/social/image-converter-og-1200x630.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Giao di·ªán c√¥ng c·ª• chuy·ªÉn ƒë·ªïi ·∫£nh WebP c·ªßa LAZINET">
    <meta property="og:site_name" content="LAZINET - C√¥ng Ty C√¥ng Ngh·ªá H√†ng ƒê·∫ßu">
    <meta property="og:locale" content="vi_VN">
    <meta property="og:locale:alternate" content="en_US">
    <meta property="og:article:author" content="LAZINET">
    <meta property="og:article:publisher" content="https://www.facebook.com/lazinet.vn">

    <!-- === TWITTER CARD - T·ªêI ∆ØU TWITTER === -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@lazinet_vn">
    <meta name="twitter:creator" content="@lazinet_tech">
    <meta name="twitter:title" content="Chuy·ªÉn ƒê·ªïi ·∫¢nh Sang WebP | C√¥ng C·ª• N√©n ·∫¢nh Chuy√™n Nghi·ªáp - LAZINET">
    <meta name="twitter:description" content="Chuy·ªÉn ƒë·ªïi ·∫£nh sang WebP mi·ªÖn ph√≠ - N√©n ·∫£nh, resize, l√†m ƒë·∫πp ·∫£nh online. H·ªó tr·ª£ ƒëa ƒë·ªãnh d·∫°ng.">
    <meta name="twitter:image" content="https://lazinet.com/assets/img/social/image-converter-twitter-1200x600.jpg">
    <meta name="twitter:image:alt" content="C√¥ng c·ª• chuy·ªÉn ƒë·ªïi ·∫£nh WebP c·ªßa LAZINET">
    <meta name="twitter:label1" content="Th·ªùi gian ƒë·ªçc">
    <meta name="twitter:data1" content="2 ph√∫t">
    <meta name="twitter:label2" content="Lo·∫°i c√¥ng c·ª•">
    <meta name="twitter:data2" content="N√©n ·∫£nh WebP mi·ªÖn ph√≠">

    <!-- === WHATSAPP SPECIFIC === -->
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:secure_url" content="https://lazinet.com/assets/img/social/image-converter-whatsapp-300x300.jpg">

    <!-- === LINKEDIN OPTIMIZATION === -->
    <meta property="og:image:linkedin" content="https://lazinet.com/assets/img/social/image-converter-linkedin-1200x627.jpg">

    <!-- === PINTEREST === -->
    <meta name="pinterest" content="nopin" description="C√¥ng c·ª• chuy·ªÉn ƒë·ªïi ·∫£nh WebP chuy√™n nghi·ªáp">

    <!-- === MOBILE & PWA OPTIMIZATION === -->
    <meta name="theme-color" content="#0052FF">
    <meta name="msapplication-TileColor" content="#0052FF">
    <meta name="msapplication-TileImage" content="../assets/img/logo-lazinet/lazinet_LogoOnly-144x144.png">
    <meta name="msapplication-config" content="../browserconfig.xml">
    <meta name="apple-mobile-web-app-title" content="LAZINET Image Converter">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="application-name" content="LAZINET Image Converter">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <!-- === SCHEMA.ORG STRUCTURED DATA - C·∫¢I THI·ªÜN RICH SNIPPETS === -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "LAZINET Image Converter",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web",
        "description": "C√¥ng c·ª• chuy·ªÉn ƒë·ªïi v√† n√©n ·∫£nh sang WebP mi·ªÖn ph√≠ v·ªõi resize, l√†m ƒë·∫πp, h·ªó tr·ª£ batch processing.",
        "url": "https://lazinet.com/image-converter.html",
        "image": "https://lazinet.com/assets/img/social/image-converter-schema-1200x630.jpg",
        "author": {
            "@type": "Organization",
            "name": "LAZINET Technologies",
            "url": "https://lazinet.com",
            "logo": "https://lazinet.com/assets/img/logo-lazinet/lazinet_LogoFullv2.png"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "VND",
            "availability": "https://schema.org/InStock",
            "url": "https://lazinet.com/image-converter.html"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "ratingCount": "1200",
            "bestRating": "5",
            "worstRating": "1"
        },
        "featureList": [
            "N√©n batch mi·ªÖn ph√≠",
            "Resize v√† l√†m ƒë·∫πp ·∫£nh",
            "H·ªó tr·ª£ JPG, PNG, GIF, TIFF",
            "Xu·∫•t WebP/AVIF/PNG/JPG",
            "T·∫£i ZIP ho·∫∑c ri√™ng l·∫ª"
        ],
        "softwareVersion": "2.0",
        "datePublished": "2024-01-20",
        "dateModified": "2025-12-11"
    }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Trang ch·ªß",
                "item": "https://lazinet.com"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "C√¥ng c·ª• mi·ªÖn ph√≠",
                "item": "https://lazinet.com/utilities.html"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Chuy·ªÉn ƒê·ªïi ·∫¢nh WebP",
                "item": "https://lazinet.com/image-converter.html"
            }
        ]
    }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Chuy·ªÉn ƒê·ªïi ·∫¢nh Sang WebP Mi·ªÖn Ph√≠ | LAZINET",
        "description": "C√¥ng c·ª• chuy·ªÉn ƒë·ªïi v√† n√©n ·∫£nh WebP chuy√™n nghi·ªáp v·ªõi t√πy ch·ªânh ƒë·∫ßy ƒë·ªß",
        "url": "https://lazinet.com/image-converter.html",
        "primaryImageOfPage": {
            "@type": "ImageObject",
            "url": "https://lazinet.com/assets/img/social/image-converter-og-1200x630.jpg",
            "width": 1200,
            "height": 630
        },
        "isPartOf": {
            "@type": "WebSite",
            "name": "LAZINET",
            "url": "https://lazinet.com",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://lazinet.com/search?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        },
        "speakable": {
            "@type": "SpeakableSpecification",
            "cssSelector": [".main-content", ".tool-description"]
        },
        "inLanguage": "vi-VN"
    }
    </script>

    <!-- === ADDITIONAL SEO ENHANCEMENTS === -->
    <meta name="google-site-verification" content="YOUR_GOOGLE_VERIFICATION_CODE">
    <meta name="yandex-verification" content="YOUR_YANDEX_VERIFICATION">
    <meta name="baidu-site-verification" content="YOUR_BAIDU_VERIFICATION">
    <meta name="facebook-domain-verification" content="YOUR_FACEBOOK_VERIFICATION">

    <!-- === PERFORMANCE & CACHING HINTS === -->
    <meta http-equiv="Cache-Control" content="max-age=31536000, public">
    <meta http-equiv="Expires" content="Mon, 10 Dec 2025 00:00:00 GMT">
    <meta http-equiv="Pragma" content="public">
    <meta http-equiv="Content-Language" content="vi">

    <!-- === PRELOAD CRITICAL RESOURCES === -->
    <link rel="preload" href="../assets/img/logo-lazinet/lazinet_LogoFullv2.png" as="image">
    
    <!-- === CSS FILES from LAZINET === -->
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Geist:wght@300..700&family=Instrument+Sans:wght@400..700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sora:wght@100..800&amp;display=swap">
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" media="screen">
    <link rel="stylesheet" href="../assets/css/slicknav.min.css">
    <link rel="stylesheet" href="../assets/css/swiper-bundle.min.css">
    <link rel="stylesheet" href="../assets/css/all.min.css" media="screen">
    <link rel="stylesheet" href="../assets/css/animate.css">
    <link rel="stylesheet" href="../assets/css/magnific-popup.css">
    <link rel="stylesheet" href="../assets/css/mousecursor.css">
    <link rel="stylesheet" href="../assets/css/custom.css" media="screen">
    <link rel="stylesheet" href="../assets/css/lazinet.css">
    
    <style>
        /* === GLOBAL VARIABLES === */
        :root {
            --primary-color: #FFFFFF;
            --secondary-color: #FFFFFF0A;
            --orange-main: #ff5000;
            --orange-light: #FFbbbb;
            --blue-main: #0052FF;
            --blue-light: #ccccff;
            --text-color: #FFFFFF;
            --accent-color: #3F82FB;
            --accent-secondary-color: #0F2453;
            --bg-color: #0F162C;
            --white-color: #FFFFFF;
            --black-color: #000000;
            --divider-color: #FFFFFF1A;
            --success-color: #4CAF50;
            --error-color: rgb(230, 87, 87);
            --warning-color: #FF9800;
            --info-color: #2196F3;
            --default-font: "Instrument Sans", "Geist", "Inter", system-ui, sans-serif;
            --dropdown-bg: #e0f2fe; /* Light blue for dropdown options */
        }

        /* === RESET & BASE STYLES === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--default-font);
            background: linear-gradient(135deg, var(--accent-secondary-color) 0%, var(--accent-color) 100%);
            min-height: 100vh;
            color: var(--text-color);
            overflow-x: hidden;
            padding: 20px;
        }

        /* === CONTAINER === */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-color);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 30px;
            border: 1px solid var(--divider-color);
        }

        /* === HEADER === */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }

        .logo {
            height: 80px;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--orange-main), var(--blue-main));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
            margin-bottom: 30px;
            text-align: center;
        }

        /* === MAIN CONTENT LAYOUT === */
        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
        }

        /* === CONTROL PANEL === */
        .control-panel {
            background: var(--secondary-color);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid var(--divider-color);
            height: fit-content;
        }

        .panel-section {
            margin-bottom: 25px;
        }

        .panel-section:last-child {
            margin-bottom: 0;
        }

        .section-title {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-title i {
            font-size: 1.2em;
        }

        /* === FORM CONTROLS === */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.95em;
            color: var(--text-color);
            opacity: 0.9;
        }

        .input-group {
            position: relative;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            background: var(--divider-color);
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--orange-main);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .range-value {
            position: absolute;
            right: 0;
            top: 0;
            background: var(--accent-color);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.85em;
            font-weight: 600;
        }

        select, input[type="number"], input[type="file"] {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid var(--divider-color);
            border-radius: 10px;
            color: var(--text-color);
            font-size: 14px;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        /* Dropdown options styling */
        select option {
            background: var(--dropdown-bg);
            color: var(--black-color);
            padding: 5px;
        }

        select option:hover {
            background: var(--accent-color);
            color: var(--white-color);
        }

        select:focus, input[type="number"]:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(63, 130, 251, 0.1);
        }

        /* === RADIO GROUP === */
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }

        .radio-option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--divider-color);
        }

        .radio-option.selected {
            background: rgba(63, 130, 251, 0.15);
            border-color: var(--accent-color);
        }

        .radio-option input[type="radio"] {
            margin: 0;
        }

        /* === BUTTONS === */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            white-space: nowrap;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-secondary-color), var(--accent-color));
            color: var(--white-color);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary-color));
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(63, 130, 251, 0.3);
        }

        .btn-secondary {
            background: var(--secondary-color);
            color: var(--text-color);
            border: 2px solid var(--divider-color);
        }

        .btn-secondary:hover {
            background: var(--accent-secondary-color);
            transform: translateY(-2px);
        }

        .btn-large {
            width: 100%;
            padding: 16px;
            font-size: 18px;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        /* === UPLOAD AREA === */
        .upload-area {
            background: var(--secondary-color);
            border: 3px dashed var(--divider-color);
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .upload-area:hover, .upload-area.dragover {
            border-color: var(--accent-color);
            background: rgba(63, 130, 251, 0.1);
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.8;
        }

        .upload-text {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .upload-hint {
            font-size: 0.9em;
            opacity: 0.7;
            margin-bottom: 20px;
        }

        .file-input {
            display: none;
        }

        .file-input-group {
            display: flex;
            gap: 10px;
        }

        .file-input-group input {
            flex: 1;
        }

        /* === PREVIEW SECTION === */
        .preview-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .preview-card {
            background: var(--secondary-color);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--divider-color);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .preview-header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--divider-color);
        }

        .preview-title {
            font-weight: 600;
            font-size: 1.1em;
            color: var(--primary-color);
        }

        .file-size {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .image-container {
            position: relative;
            width: 100%;
            height: 200px;
            margin-bottom: 15px;
            border-radius: 10px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-preview {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            background: repeating-conic-gradient(#1a1a2e 0% 25%, #16213e 0% 50%) 50% / 20px 20px;
        }

        .info-overlay {
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            color: var(--white-color);
            font-size: 0.8em;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .image-container:hover .info-overlay {
            opacity: 1;
        }

        .info-top, .info-bottom {
            background: rgba(0, 0, 0, 0.5);
            padding: 5px;
            border-radius: 5px;
            text-align: center;
        }

        .info-bottom .compression-rate {
            font-weight: bold;
            color: var(--success-color);
        }

        .progress-container {
            width: 100%;
            margin-top: auto;
        }

        .progress-bar {
            height: 6px;
            background: var(--divider-color);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--orange-main), var(--blue-main));
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
        }

        /* === BATCH PROCESSING === */
        .batch-processing {
            margin-top: 30px;
        }

        .file-list {
            max-height: 300px;
            overflow-y: auto;
            background: var(--secondary-color);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid var(--divider-color);
        }

        .file-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 8px;
            transition: background 0.3s;
        }

        .file-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .file-item:last-child {
            margin-bottom: 0;
        }

        .file-icon {
            font-size: 1.2em;
        }

        .file-name {
            flex: 1;
            font-size: 0.95em;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .file-status {
            font-size: 0.8em;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 600;
        }

        .status-pending {
            background: rgba(255, 152, 0, 0.2);
            color: var(--warning-color);
        }

        .status-processing {
            background: rgba(33, 150, 243, 0.2);
            color: var(--info-color);
        }

        .status-completed {
            background: rgba(76, 175, 80, 0.2);
            color: var(--success-color);
        }

        /* === OUTPUT OPTIONS === */
        .output-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .output-option {
            background: var(--secondary-color);
            border: 2px solid var(--divider-color);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .output-option:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }

        .output-option.selected {
            border-color: var(--accent-color);
            background: rgba(63, 130, 251, 0.15);
        }

        .output-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .output-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .output-desc {
            font-size: 0.85em;
            opacity: 0.8;
        }

        /* === STATISTICS === */
        .stats-panel {
            background: linear-gradient(135deg, var(--accent-secondary-color), var(--accent-color));
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .stat-value {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--white-color);
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* === NOTIFICATIONS === */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            background: var(--secondary-color);
            border-left: 4px solid var(--success-color);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            border-left-color: var(--error-color);
        }

        .notification.warning {
            border-left-color: var(--warning-color);
        }

        .notification.info {
            border-left-color: var(--info-color);
        }

        .notification-icon {
            font-size: 1.5em;
        }

        /* === RESPONSIVE DESIGN === */
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .control-panel {
                position: sticky;
                top: 20px;
                z-index: 100;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .preview-section {
                grid-template-columns: 1fr;
            }

            .stats-panel {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 15px;
                border-radius: 15px;
            }
            
            h1 {
                font-size: 1.5em;
            }
            
            .stats-panel {
                grid-template-columns: 1fr;
            }

            .file-input-group {
                flex-direction: column;
            }
        }
    </style>

    <!-- SweetAlert2 for notifications -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Compressor.js for image compression -->
    <script src="https://cdn.jsdelivr.net/npm/compressorjs@1.2.1/dist/compressor.min.js"></script>
    
    <!-- FileSaver.js for downloading files -->
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

    <!-- JSZip for ZIP download -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo-container">
                <img src="../assets/img/logo-lazinet/lazinet_LogoFullv2_vi.png" alt="LAZINET Logo" class="logo">
            </div>
            <h1>LAZINET Image Converter Pro</h1>
            <p class="subtitle">Chuy·ªÉn ƒë·ªïi ·∫£nh sang WebP - N√©n ·∫£nh, Resize & L√†m ƒë·∫πp ·∫£nh tr·ª±c tuy·∫øn</p>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Control Panel -->
            <div class="control-panel">
                <!-- Upload Section -->
                <div class="panel-section">
                    <div class="section-title">
                        <span>üì§</span>
                        <span>T·∫£i ·∫£nh l√™n</span>
                    </div>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìÅ</div>
                        <div class="upload-text">K√©o & Th·∫£ ·∫£nh v√†o ƒë√¢y</div>
                        <div class="upload-hint">ho·∫∑c nh·∫•p ƒë·ªÉ ch·ªçn file/th∆∞ m·ª•c</div>
                        <div class="file-input-group">
                            <input type="file" id="fileInput" class="file-input" accept=".jpg,.jpeg,.png,.gif,.bmp,.tiff,.webp" multiple>
                            <input type="file" id="folderInput" class="file-input" webkitdirectory multiple accept="image/*">
                            <div class="btn btn-primary" onclick="document.getElementById('fileInput').click()">üìÇ Ch·ªçn File</div>
                            <div class="btn btn-secondary" onclick="document.getElementById('folderInput').click()">üìÅ Ch·ªçn Th∆∞ m·ª•c</div>
                        </div>
                    </div>
                </div>

                <!-- Resize Options -->
                <div class="panel-section">
                    <div class="section-title">
                        <span>üìè</span>
                        <span>T√πy ch·ªânh k√≠ch th∆∞·ªõc</span>
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" id="resizeOption1">
                            <input type="radio" name="resize" value="0" checked>
                            <span>Gi·ªØ nguy√™n k√≠ch th∆∞·ªõc g·ªëc</span>
                        </label>
                        <label class="radio-option" id="resizeOption2">
                            <input type="radio" name="resize" value="1">
                            <span>Thay ƒë·ªïi chi·ªÅu r·ªông</span>
                        </label>
                        <label class="radio-option" id="resizeOption3">
                            <input type="radio" name="resize" value="2">
                            <span>Thay ƒë·ªïi chi·ªÅu cao</span>
                        </label>
                    </div>
                    
                    <div class="form-group" id="sizeInputGroup" style="display: none;">
                        <label for="targetSize" id="sizeLabel">K√≠ch th∆∞·ªõc m·ª•c ti√™u (px)</label>
                        <input type="number" id="targetSize" value="1024" min="100" max="5000">
                    </div>
                </div>

                <!-- Quality Settings -->
                <div class="panel-section">
                    <div class="section-title">
                        <span>‚öôÔ∏è</span>
                        <span>C√†i ƒë·∫∑t ch·∫•t l∆∞·ª£ng</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="quality">Ch·∫•t l∆∞·ª£ng (0-100)</label>
                        <div class="input-group">
                            <input type="range" id="quality" min="0" max="100" value="80">
                            <span class="range-value" id="qualityValue">80</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="resampleMethod">Thu·∫≠t to√°n l·∫•y m·∫´u</label>
                        <select id="resampleMethod">
                            <option value="lanczos">LANCZOS (Ch·∫•t l∆∞·ª£ng cao)</option>
                            <option value="bicubic">BICUBIC (C√¢n b·∫±ng)</option>
                            <option value="bilinear">BILINEAR (Nhanh)</option>
                            <option value="nearest">NEAREST (T·ªëc ƒë·ªô cao)</option>
                        </select>
                    </div>
                </div>

                <!-- Enhancement Options -->
                <div class="panel-section">
                    <div class="section-title">
                        <span>‚ú®</span>
                        <span>L√†m ƒë·∫πp ·∫£nh</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="enhanceMode">Ch·∫ø ƒë·ªô l√†m ƒë·∫πp</label>
                        <select id="enhanceMode">
                            <option value="none">Kh√¥ng l√†m ƒë·∫πp</option>
                            <option value="light">L√†m ƒë·∫πp nh·∫π</option>
                            <option value="medium">L√†m ƒë·∫πp v·ª´a</option>
                            <option value="strong">Lung linh ·∫£o l√≤i</option>
                        </select>
                    </div>
                </div>

                <!-- Output Format -->
                <div class="panel-section">
                    <div class="section-title">
                        <span>üìÅ</span>
                        <span>ƒê·ªãnh d·∫°ng ƒë·∫ßu ra</span>
                    </div>
                    
                    <div class="output-options">
                        <div class="output-option selected" data-format="webp">
                            <div class="output-icon">üñºÔ∏è</div>
                            <div class="output-name">WebP</div>
                            <div class="output-desc">Ch·∫•t l∆∞·ª£ng t·ªët, dung l∆∞·ª£ng nh·ªè</div>
                        </div>
                        <div class="output-option" data-format="png">
                            <div class="output-icon">üì∏</div>
                            <div class="output-name">PNG</div>
                            <div class="output-desc">Kh√¥ng n√©n m·∫•t d·ªØ li·ªáu</div>
                        </div>
                        <div class="output-option" data-format="jpg">
                            <div class="output-icon">üéØ</div>
                            <div class="output-name">JPG</div>
                            <div class="output-desc">Ph·ªï bi·∫øn, dung l∆∞·ª£ng nh·ªè</div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="btn-group">
                    <button class="btn btn-primary btn-large" onclick="processImages()" id="processBtn">
                        <span>üöÄ</span>
                        X·ª≠ l√Ω H√†ng Lo·∫°t
                    </button>
                    <button class="btn btn-secondary" onclick="resetAll()">
                        <span>üîÑ</span>
                        ƒê·∫∑t l·∫°i
                    </button>
                </div>

                <!-- Download Options -->
                <div class="panel-section" id="downloadSection" style="display: none;">
                    <div class="section-title">
                        <span>üíæ</span>
                        <span>T√πy ch·ªçn t·∫£i xu·ªëng</span>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="downloadIndividual()">T·∫£i Ri√™ng L·∫ª</button>
                        <button class="btn btn-secondary" onclick="downloadZip()">T·∫£i ZIP</button>
                    </div>
                </div>
            </div>

            <!-- Preview & Results -->
            <div class="results-section">
                <!-- Preview Cards -->
                <div class="preview-section" id="previewContainer">
                    <!-- Preview cards will be added here dynamically -->
                </div>

                <!-- Statistics -->
                <div class="stats-panel" id="statsPanel" style="display: none;">
                    <div class="stat-item">
                        <div class="stat-value" id="totalFilesStat">0</div>
                        <div class="stat-label">T·ªïng s·ªë ·∫£nh</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalSizeStat">0 MB</div>
                        <div class="stat-label">Dung l∆∞·ª£ng g·ªëc</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="savedSizeStat">0 MB</div>
                        <div class="stat-label">Ti·∫øt ki·ªám</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSavedStat">0s</div>
                        <div class="stat-label">Th·ªùi gian</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-icon">‚úÖ</div>
        <div class="notification-content"></div>
    </div>

    <script>
        // Global variables
        let files = [];
        let processedFiles = [];
        let outputFormat = 'webp';
        let isProcessing = false;
        let minWidth = Infinity;
        let minHeight = Infinity;
        let startTime = 0;
        
        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const folderInput = document.getElementById('folderInput');
        const previewContainer = document.getElementById('previewContainer');
        const statsPanel = document.getElementById('statsPanel');
        const processBtn = document.getElementById('processBtn');
        const downloadSection = document.getElementById('downloadSection');
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeEventListeners();
            updateRadioButtons();
            updateOutputFormat();
            updateSizeLabel();
        });
        
        // Event Listeners
        function initializeEventListeners() {
            // Prevent double trigger by using one event handler
            let isUploading = false;
            const handleUpload = (e) => {
                if (isUploading) return;
                isUploading = true;
                setTimeout(() => { isUploading = false; }, 100);
                const filesArray = e.target.files ? Array.from(e.target.files) : Array.from(e.dataTransfer.files);
                handleFiles(filesArray);
            };

            // Upload area events
            uploadArea.addEventListener('click', (e) => {
                e.stopPropagation();
                if (confirm('Ch·ªçn file hay th∆∞ m·ª•c?')) {
                    fileInput.click();
                } else {
                    folderInput.click();
                }
            });
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                handleUpload(e);
            });
            
            // File inputs
            fileInput.addEventListener('change', handleUpload);
            folderInput.addEventListener('change', handleUpload);
            
            // Radio buttons
            document.querySelectorAll('input[name="resize"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    updateSizeInput();
                    updateSizeLabel();
                });
            });
            
            // Output format selection
            document.querySelectorAll('.output-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.output-option').forEach(o => o.classList.remove('selected'));
                    option.classList.add('selected');
                    outputFormat = option.dataset.format;
                });
            });
            
            // Quality slider
            document.getElementById('quality').addEventListener('input', function() {
                document.getElementById('qualityValue').textContent = this.value;
            });
        }
        
        // Update radio button UI
        function updateRadioButtons() {
            document.querySelectorAll('.radio-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const radio = this.querySelector('input[type="radio"]');
                    radio.checked = true;
                    document.querySelectorAll('.radio-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    updateSizeInput();
                    updateSizeLabel();
                });
            });
        }
        
        // Update size input visibility
        function updateSizeInput() {
            const resizeMode = document.querySelector('input[name="resize"]:checked').value;
            const sizeInputGroup = document.getElementById('sizeInputGroup');
            sizeInputGroup.style.display = resizeMode !== '0' ? 'block' : 'none';
        }
        
        // Update size label
        function updateSizeLabel() {
            const resizeMode = document.querySelector('input[name="resize"]:checked').value;
            const label = document.getElementById('sizeLabel');
            if (resizeMode === '1') {
                label.textContent = 'Chi·ªÅu r·ªông m·ª•c ti√™u (px)';
            } else if (resizeMode === '2') {
                label.textContent = 'Chi·ªÅu cao m·ª•c ti√™u (px)';
            } else {
                label.textContent = 'K√≠ch th∆∞·ªõc m·ª•c ti√™u (px)';
            }
        }
        
        // Update output format UI
        function updateOutputFormat() {
            const selected = document.querySelector(`.output-option[data-format="${outputFormat}"]`);
            if (selected) {
                document.querySelectorAll('.output-option').forEach(o => o.classList.remove('selected'));
                selected.classList.add('selected');
            }
        }
        
        // Handle drag over
        function handleDragOver(e) {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        }
        
        // Handle files
        function handleFiles(fileArray) {
            // Filter for image files
            const imageFiles = fileArray.filter(file => 
                file.type.startsWith('image/') && 
                ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.tiff', '.webp'].some(ext => 
                    file.name.toLowerCase().endsWith(ext)
                )
            );
            
            if (imageFiles.length === 0) {
                showNotification('Kh√¥ng c√≥ file ·∫£nh h·ª£p l·ªá!', 'error');
                return;
            }
            
            // Add to files array
            files.push(...imageFiles);
            
            // Calculate min dimensions
            calculateMinDimensions(imageFiles);
            
            // Update UI
            createPreviewRows(imageFiles);
            updateStatistics();
            
            processBtn.disabled = false;
            
            showNotification(`ƒê√£ th√™m ${imageFiles.length} ·∫£nh!`, 'success');
        }
        
        // Calculate min width/height and suggest size
        function calculateMinDimensions(imageFiles) {
            Promise.all(imageFiles.map(file => {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.onload = () => {
                        minWidth = Math.min(minWidth, img.width);
                        minHeight = Math.min(minHeight, img.height);
                        resolve();
                    };
                    img.src = URL.createObjectURL(file);
                });
            })).then(() => {
                // Suggest power of 2
                const suggestedWidth = Math.pow(2, Math.round(Math.log(minWidth) / Math.log(2)));
                const suggestedHeight = Math.pow(2, Math.round(Math.log(minHeight) / Math.log(2)));
                document.getElementById('targetSize').value = suggestedWidth; // Default to width suggestion
            });
        }
        
        // Create preview rows (2 columns)
        function createPreviewRows(imageFiles) {
            previewContainer.innerHTML = '';
            imageFiles.forEach((file, index) => {
                const row = document.createElement('div');
                row.style.display = 'grid';
                row.style.gridTemplateColumns = '1fr 1fr';
                row.style.gap = '30px';
                row.style.marginBottom = '30px';
                
                const originalCard = createPreviewCard(file, true, index);
                const processedCard = createPreviewCard(file, false, index);
                
                row.appendChild(originalCard);
                row.appendChild(processedCard);
                previewContainer.appendChild(row);
            });
        }
        
        // Create preview card
        function createPreviewCard(file, isOriginal, index) {
            const card = document.createElement('div');
            card.className = 'preview-card';
            card.dataset.index = index;
            card.dataset.isOriginal = isOriginal;
            
            const fileSize = (file.size / 1024).toFixed(2);
            const type = file.type.split('/')[1].toUpperCase();
            
            const reader = new FileReader();
            reader.onload = (e) => {
                const dataUrl = e.target.result;
                const img = new Image();
                img.onload = () => {
                    const ratio = (img.width / img.height).toFixed(2);
                    const dim = `${img.width}x${img.height}`;
                    card.querySelector('.image-preview').src = dataUrl;
                    card.querySelector('.info-type-dim').textContent = `${type} | ${dim}`;
                    card.querySelector('.info-size-ratio').textContent = `${fileSize} KB | ${ratio}`;
                };
                img.src = dataUrl;
            };
            reader.readAsDataURL(file);
            
            card.innerHTML = `
                <div class="preview-header">
                    <div class="preview-title">${file.name} ${isOriginal ? '(G·ªëc)' : '(ƒê√£ n√©n)'}</div>
                    <div class="file-size">${fileSize} KB</div>
                </div>
                <div class="image-container">
                    <img src="" alt="${file.name}" class="image-preview">
                    <div class="info-overlay">
                        <div class="info-top">
                            <span class="info-type-dim"></span>
                        </div>
                        <div class="info-bottom">
                            <span class="info-size-ratio"></span>
                            ${!isOriginal ? '<span class="compression-rate" id="comp-rate-${index}"></span>' : ''}
                        </div>
                    </div>
                </div>
                <div class="progress-container" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <div class="progress-text">
                        <span>ƒêang x·ª≠ l√Ω...</span>
                        <span class="progress-percent">0%</span>
                    </div>
                </div>
                ${isOriginal ? '' : '<button class="btn btn-primary" onclick="downloadProcessed(this)" style="width: 100%; margin-top: 15px;"><span>üíæ</span> T·∫£i xu·ªëng</button>'}
            `;
            
            return card;
        }
        
        // Update statistics
        function updateStatistics() {
            if (files.length === 0) {
                statsPanel.style.display = 'none';
                return;
            }
            
            statsPanel.style.display = 'grid';
            
            const totalSize = files.reduce((sum, file) => sum + file.size, 0);
            const totalSizeMB = (totalSize / (1024 * 1024)).toFixed(2);
            
            document.getElementById('totalFilesStat').textContent = files.length;
            document.getElementById('totalSizeStat').textContent = `${totalSizeMB} MB`;
        }
        
        // Process images (batch only)
        async function processImages() {
            if (files.length === 0) {
                showNotification('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt ·∫£nh!', 'warning');
                return;
            }
            
            if (isProcessing) return;
            
            isProcessing = true;
            startTime = Date.now();
            processBtn.disabled = true;
            processBtn.innerHTML = '<span>‚è≥</span> ƒêang x·ª≠ l√Ω...';
            downloadSection.style.display = 'none';
            
            processedFiles = [];
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const originalCard = document.querySelector(`[data-index="${i}"][data-is-original="true"] .progress-container`);
                const processedCard = document.querySelector(`[data-index="${i}"][data-is-original="false"]`);
                const progressFill = originalCard.querySelector('.progress-fill');
                const progressPercent = originalCard.querySelector('.progress-percent');
                
                originalCard.style.display = 'block';
                
                try {
                    const result = await processImage(file, (progress) => {
                        progressFill.style.width = `${progress}%`;
                        progressPercent.textContent = `${progress}%`;
                    });
                    
                    processedFiles.push({ original: file, processed: result, index: i });
                    
                    // Update processed card
                    const processedReader = new FileReader();
                    processedReader.onload = (e) => {
                        const processedImg = new Image();
                        processedImg.onload = () => {
                            const ratio = (processedImg.width / processedImg.height).toFixed(2);
                            const dim = `${processedImg.width}x${processedImg.height}`;
                            const processedSize = (result.size / 1024).toFixed(2);
                            const compRate = ((result.size / file.size) * 100).toFixed(1);
                            processedCard.querySelector('.file-size').textContent = `${processedSize} KB`;
                            processedCard.querySelector('.info-type-dim').textContent = `${outputFormat.toUpperCase()} | ${dim}`;
                            processedCard.querySelector('.info-size-ratio').textContent = `${processedSize} KB | ${ratio}`;
                            document.getElementById(`comp-rate-${i}`).textContent = `${compRate}% n√©n`;
                            processedCard.querySelector('.image-preview').src = e.target.result;
                        };
                        processedImg.src = e.target.result;
                    };
                    processedReader.readAsDataURL(result);
                    
                    progressFill.style.background = 'linear-gradient(90deg, #4CAF50, #45a049)';
                    progressPercent.textContent = 'Ho√†n th√†nh!';
                    
                } catch (error) {
                    console.error('Error processing image:', error);
                    progressFill.style.background = 'var(--error-color)';
                    progressPercent.textContent = 'L·ªói!';
                }
            }
            
            const endTime = Date.now();
            const timeTaken = ((endTime - startTime) / 1000).toFixed(1);
            
            // Update stats
            const totalOriginalSize = files.reduce((sum, f) => sum + f.size, 0);
            const totalProcessedSize = processedFiles.reduce((sum, p) => sum + p.processed.size, 0);
            const savedSizeMB = ((totalOriginalSize - totalProcessedSize) / (1024 * 1024)).toFixed(2);
            document.getElementById('savedSizeStat').textContent = `${savedSizeMB} MB`;
            document.getElementById('timeSavedStat').textContent = `${timeTaken}s`;
            
            processBtn.disabled = false;
            processBtn.innerHTML = '<span>‚úÖ</span> Ho√†n t·∫•t!';
            downloadSection.style.display = 'block';
            
            showNotification(`ƒê√£ x·ª≠ l√Ω xong ${files.length} ·∫£nh trong ${timeTaken}s!`, 'success');
            isProcessing = false;
        }
        
        // Process single image with options
        async function processImage(file, progressCallback = null) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => {
                    // Get settings
                    const quality = parseInt(document.getElementById('quality').value);
                    const resizeMode = document.querySelector('input[name="resize"]:checked').value;
                    const targetSize = parseInt(document.getElementById('targetSize').value);
                    const enhanceMode = document.getElementById('enhanceMode').value;
                    
                    // Create canvas
                    const canvas = document.createElement('canvas');
                    let ctx = canvas.getContext('2d');
                    
                    // Calculate dimensions
                    let width = img.width;
                    let height = img.height;
                    
                    if (resizeMode === '1' && targetSize > 0) {
                        const ratio = targetSize / width;
                        width = targetSize;
                        height = Math.round(height * ratio);
                    } else if (resizeMode === '2' && targetSize > 0) {
                        const ratio = targetSize / height;
                        height = targetSize;
                        width = Math.round(width * ratio);
                    }
                    
                    // Set canvas dimensions
                    canvas.width = width;
                    canvas.height = height;
                    
                    // Draw image
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    // Apply enhancements
                    if (enhanceMode !== 'none') {
                        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                        const data = imageData.data;
                        
                        let brightness = 1.0;
                        let contrast = 1.0;
                        
                        switch (enhanceMode) {
                            case 'light':
                                brightness = 1.1;
                                contrast = 1.1;
                                break;
                            case 'medium':
                                brightness = 1.2;
                                contrast = 1.2;
                                break;
                            case 'strong':
                                brightness = 1.4;
                                contrast = 1.4;
                                break;
                        }
                        
                        for (let i = 0; i < data.length; i += 4) {
                            data[i] = Math.min(255, data[i] * brightness);
                            data[i + 1] = Math.min(255, data[i + 1] * brightness);
                            data[i + 2] = Math.min(255, data[i + 2] * brightness);
                            
                            const factor = (259 * (contrast * 255 + 255)) / (255 * (259 - contrast * 255));
                            data[i] = factor * (data[i] - 128) + 128;
                            data[i + 1] = factor * (data[i + 1] - 128) + 128;
                            data[i + 2] = factor * (data[i + 2] - 128) + 128;
                        }
                        
                        ctx.putImageData(imageData, 0, 0);
                    }
                    
                    // Convert to desired format
                    const mimeType = `image/${outputFormat}`;
                    canvas.toBlob((blob) => {
                        if (progressCallback) progressCallback(100);
                        resolve(blob);
                    }, mimeType, quality / 100);
                };
                
                img.onerror = () => reject(new Error('Failed to load image'));
                img.src = URL.createObjectURL(file);
            });
        }
        
        // Download individual
        function downloadIndividual() {
            processedFiles.forEach(({ original, processed, index }) => {
                const a = document.createElement('a');
                a.href = URL.createObjectURL(processed);
                a.download = `${original.name.split('.')[0]}_optimized.${outputFormat}`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            });
            showNotification('ƒê√£ t·∫£i xu·ªëng t·∫•t c·∫£ file ri√™ng l·∫ª!', 'success');
        }
        
        // Download ZIP
        function downloadZip() {
            const zip = new JSZip();
            processedFiles.forEach(({ original, processed }) => {
                zip.file(`${original.name.split('.')[0]}_optimized.${outputFormat}`, processed);
            });
            zip.generateAsync({type: 'blob'}).then((content) => {
                saveAs(content, 'optimized_images.zip');
            });
            showNotification('ƒê√£ t·∫°o v√† t·∫£i ZIP!', 'success');
        }
        
        // Download single processed
        function downloadProcessed(button) {
            const index = button.closest('.preview-card').dataset.index;
            const processed = processedFiles.find(p => p.index == index).processed;
            const original = files[index];
            const a = document.createElement('a');
            a.href = URL.createObjectURL(processed);
            a.download = `${original.name.split('.')[0]}_optimized.${outputFormat}`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
        
        // Reset all
        function resetAll() {
            Swal.fire({
                title: 'X√°c nh·∫≠n ƒë·∫∑t l·∫°i',
                text: 'B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒë·∫∑t l·∫°i t·∫•t c·∫£?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#ff5000',
                cancelButtonColor: '#6c757d',
                confirmButtonText: 'ƒê·∫∑t l·∫°i',
                cancelButtonText: 'H·ªßy'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Reset everything
                    files = [];
                    processedFiles = [];
                    minWidth = Infinity;
                    minHeight = Infinity;
                    fileInput.value = '';
                    folderInput.value = '';
                    previewContainer.innerHTML = '';
                    statsPanel.style.display = 'none';
                    downloadSection.style.display = 'none';
                    processBtn.disabled = true;
                    processBtn.innerHTML = '<span>üöÄ</span> X·ª≠ l√Ω H√†ng Lo·∫°t';
                    
                    // Reset controls
                    document.querySelector('input[name="resize"][value="0"]').checked = true;
                    updateRadioButtons();
                    updateSizeInput();
                    updateSizeLabel();
                    
                    document.getElementById('quality').value = 80;
                    document.getElementById('qualityValue').textContent = '80';
                    
                    document.getElementById('targetSize').value = '1024';
                    document.getElementById('enhanceMode').value = 'none';
                    document.getElementById('resampleMethod').value = 'lanczos';
                    
                    outputFormat = 'webp';
                    updateOutputFormat();
                    
                    showNotification('ƒê√£ ƒë·∫∑t l·∫°i t·∫•t c·∫£ c√†i ƒë·∫∑t!', 'success');
                }
            });
        }
        
        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const content = notification.querySelector('.notification-content');
            const icon = notification.querySelector('.notification-icon');
            
            content.textContent = message;
            
            switch (type) {
                case 'success':
                    icon.textContent = '‚úÖ';
                    notification.style.borderLeftColor = 'var(--success-color)';
                    break;
                case 'error':
                    icon.textContent = '‚ùå';
                    notification.style.borderLeftColor = 'var(--error-color)';
                    break;
                case 'warning':
                    icon.textContent = '‚ö†Ô∏è';
                    notification.style.borderLeftColor = 'var(--warning-color)';
                    break;
                case 'info':
                    icon.textContent = '‚ÑπÔ∏è';
                    notification.style.borderLeftColor = 'var(--info-color)';
                    break;
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>