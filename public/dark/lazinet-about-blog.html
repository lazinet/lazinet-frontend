<!DOCTYPE html>
<html lang="zxx">
<head>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="Awaiken">
    <!-- Page Title -->
    <title>Netzon - Cyber Security Services HTML Template</title>
    <!-- Favicon Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.png">
    <!-- Google Fonts Css-->
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@100..800&amp;display=swap" rel="stylesheet">
    <!-- Bootstrap Css -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <!-- SlickNav Css -->
    <link href="assets/css/slicknav.min.css" rel="stylesheet">
    <!-- Swiper Css -->
    <link rel="stylesheet" href="assets/css/swiper-bundle.min.css">
    <!-- Font Awesome Icon Css-->
    <link href="assets/css/all.min.css" rel="stylesheet" media="screen">
    <!-- Animated Css -->
    <link href="assets/css/animate.css" rel="stylesheet">
    <!-- Magnific Popup Core Css File -->
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <!-- Mouse Cursor Css File -->
    <link rel="stylesheet" href="assets/css/mousecursor.css">
    <!-- Main Custom Css -->
    <link href="assets/css/custom.css" rel="stylesheet" media="screen">
    <style>
        /* Custom Tooltip for Image Overlay */
        .post-featured-image {
            position: relative;
            overflow: hidden;
        }
        .post-featured-image .image-tooltip {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            background-color: rgba(0, 0, 0, 0.7); /* Nền trong suốt */
            color: #ffffff; /* Chữ trắng tương phản */
            display: flex;
            flex-direction: column; /* Để tách header và body theo chiều dọc */
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            font-size: 14px;
            line-height: 1.4;
            z-index: 10;
            backdrop-filter: blur(5px); /* Thêm blur cho hiệu ứng mờ đẹp */
            overflow-y: auto; /* Thêm scroll nếu nội dung quá dài */
            max-height: 80%; /* Giới hạn chiều cao để tránh che hết ảnh */
        }
        .post-featured-image .image-tooltip .tooltip-header {
            font-weight: bold; /* Đậm cho dòng Date + Location */
            margin-bottom: 10px;
            font-size: 16px; /* Lớn hơn một chút cho header */
            text-align: center;
        }
        .post-featured-image .image-tooltip .tooltip-body {
            text-align: justify; /* Căn đều cho P1 */
            hyphens: auto; /* Tự động ngắt dòng nếu cần */
        }
        .post-featured-image:hover .image-tooltip {
            opacity: 1;
            visibility: visible;
        }
        .post-featured-image figure {
            position: relative;
        }
        .post-featured-image img {
            transition: transform 0.3s ease; /* Hiệu ứng zoom nhẹ khi hover */
        }
        .post-featured-image:hover img {
            transform: scale(1.05);
        }
    </style>
</head>
<body>

    <!-- Preloader Start -->
    <div class="preloader">
        <div class="loading-container">
            <div class="loading"></div>
            <div id="loading-icon"><img src="assets/img/logo-lazinet/lazinet_LogoOnly.svg" alt=""></div>
        </div>
    </div>
    <!-- Preloader End -->

    <!-- Page Blog Start -->
    <div class="page-blog">
        <div class="container">
            <div class="row" id="blog-list">
                <!-- Dynamic posts will be rendered here -->
            </div>
            <div class="col-lg-12">
                <!-- Page Pagination Start -->
                <div class="page-pagination wow fadeInUp" data-wow-delay="1s">
                    <ul class="pagination">
                        <li><a href="#"><i class="fa-solid fa-angle-left"></i></a></li>
                        <li class="active"><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#"><i class="fa-solid fa-angle-right"></i></a></li>
                    </ul>
                </div>
                <!-- Page Pagination End -->
            </div>
        </div>
    </div>
    <!-- Page Blog End -->

    <!-- Jquery Library File -->
    <script src="assets/js/jquery-3.7.1.min.js"></script>
    <!-- ... (all other scripts from template) ... -->
    <script src="assets/js/circle-progress.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/validator.min.js"></script>
    <script src="assets/js/jquery.slicknav.js"></script>
    <script src="assets/js/swiper-bundle.min.js"></script>
    <script src="assets/js/jquery.waypoints.min.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/SmoothScroll.js"></script>
    <script src="assets/js/parallaxie.js"></script>
    <script src="assets/js/gsap.min.js"></script>
    <script src="assets/js/magiccursor.js"></script>
    <script src="assets/js/SplitText.min.js"></script>
    <script src="assets/js/ScrollTrigger.min.js"></script>
    <script src="assets/js/jquery.mb.YTPlayer.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/function.js"></script>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxdg67nrP0Bf4VJzDRa7JAH5i--Z0EbWFMDKUv1TLFwRQtkCpkL57mNx07D9Q53h-Udxg/exec';  // Dùng URL mới sau deploy
        const BASE_IMG_URL = 'assets/img/';

        function loadBlogList() {
            $.ajax({
                url: SCRIPT_URL + '?action=list',
                dataType: 'jsonp',  // JSONP bypass CORS
                success: function(blogs) {
                    const row = document.getElementById('blog-list');
                    console.log(blogs);
                    blogs.forEach((blog, index) => {
                        const delay = (index * 0.2) + 's';
                        const dateStr = blog['Date'] ? new Date(blog['Date']).toLocaleDateString('vi-VN') : '';
                        const locationStr = blog['Location'] || 'N/A';
                        const introFull = blog['P1 (Intro)'] || '';  // Hiển thị đầy đủ P1
                        
                        const tooltipHtml = `
                            <div class="tooltip-header"><strong>${dateStr} - ${locationStr}</strong></div>
                            <div class="tooltip-body">${introFull}</div>
                        `;
                        
                        const postHtml = `
                            <div class="col-xl-4 col-md-6">
                                <div class="post-item wow fadeInUp" data-wow-delay="${delay}">
                                    <div class="post-featured-image">
                                        <a href="lazinet-about-blog-single.html?blog_id=${blog.Blog_ID}" data-cursor-text="View">
                                            <figure class="image-anime">
                                                <img src="${BASE_IMG_URL}${blog.Image_Sub_URL}" alt="${blog.Title}">
                                                <div class="image-tooltip">${tooltipHtml}</div>
                                            </figure>
                                        </a>
                                    </div>
                                    <div class="post-item-body">
                                        <div class="post-item-content">
                                            <h2><a href="lazinet-about-blog-single.html?blog_id=${blog.Blog_ID}">${blog.Title}</a></h2>
                                        </div>
                                        <div class="post-item-btn">
                                            <a href="lazinet-about-blog-single.html?blog_id=${blog.Blog_ID}" class="readmore-btn">read more</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        row.insertAdjacentHTML('beforeend', postHtml);
                    });
                    // Re-init WOW animation sau khi render
                    new WOW().init();
                },
                error: function() {
                    console.error('Error loading blogs');
                    document.getElementById('blog-list').innerHTML = '<p>Error loading posts.</p>';
                }
            });
        }

        // Load on page ready
        $(document).ready(function() {
            loadBlogList();
        });
    </script>
</body>
</html>